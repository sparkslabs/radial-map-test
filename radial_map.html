<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Radial Map POC</title>

<style>
  body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: #1e1e24;
    color: #ddd;
    display: flex;
    flex-direction: column;
    align-items: centre;
  }

  header {
    padding: 10px 16px;
    background: #2b2b33;
    width: 100%;
    box-sizing: border-box;
  }

  #container {
    width: min(1400px, 95vw);
    aspect-ratio: 16/9;
    margin: 20px auto;
    background: #0f0f14;
    border: 1px solid #444;
  }

  svg {
    width: 100%;
    height: 100%;
  }

  .cell {
    fill: #1a2430;
    stroke: #394b5f;
    stroke-width: 1.5;
  }

  .cell:hover {
    fill: #2c3c4f;
  }

  .dot {
    fill: #ffcc66;
    stroke: #222;
    stroke-width: 1;
  }

  .dot-label {
    fill: #fff;
    font-size: 11px;
    text-anchor: middle;
    pointer-events: none;
  }
</style>
</head>

<body>

<header>
  <strong>Radial Map â€” version 0</strong>
</header>

<div id="container"></div>

<script type="module">
/* =======================
   Configuration
======================= */

const CONFIG = {
  segments: 6,
  rings: 3,
  radius: 320
};

const ITEMS = [
  { id:"a1", label:"Apple" },
  { id:"c3", label:"Banana" },
  { id:"d2", label:"Cat" },
  { id:"f1", label:"Dog" },
  { id:"b2", label:"Elephant" },
  { id:"e3", label:"Fox" },
  { id:"a3", label:"Grape" },
  { id:"c1", label:"Horse" }
];

/* =======================
   SVG helpers
======================= */

const NS = "http://www.w3.org/2000/svg";
const TAU = Math.PI * 2;

function el(tag, attrs={}, children=[]) {
  const n = document.createElementNS(NS, tag);
  for (const [k,v] of Object.entries(attrs)) n.setAttribute(k, v);
  for (const c of children) n.append(c);
  return n;
}

function polar(cx, cy, r, a) {
  return { x: cx + r*Math.cos(a), y: cy + r*Math.sin(a) };
}

function sectorPath(cx, cy, r0, r1, a0, a1) {
  const p0 = polar(cx,cy,r1,a0);
  const p1 = polar(cx,cy,r1,a1);
  const p2 = polar(cx,cy,r0,a1);
  const p3 = polar(cx,cy,r0,a0);
  const large = (a1-a0) > Math.PI ? 1 : 0;

  return `
    M ${p0.x} ${p0.y}
    A ${r1} ${r1} 0 ${large} 1 ${p1.x} ${p1.y}
    L ${p2.x} ${p2.y}
    A ${r0} ${r0} 0 ${large} 0 ${p3.x} ${p3.y}
    Z
  `;
}

/* =======================
   Map build
======================= */

const W = 1600;
const H = 900;
const cx = W/2;
const cy = H/2;

const svg = el("svg", { viewBox:`0 0 ${W} ${H}` });
document.getElementById("container").append(svg);

const letters = "abcdefghijklmnopqrstuvwxyz";

/* store geometry for later dot placement */
const cellGeometry = {};

for (let s=0; s<CONFIG.segments; s++) {
  for (let r=1; r<=CONFIG.rings; r++) {

    const a0 = (s/CONFIG.segments)*TAU - Math.PI/2;
    const a1 = ((s+1)/CONFIG.segments)*TAU - Math.PI/2;

    const r0 = CONFIG.radius*((r-1)/CONFIG.rings);
    const r1 = CONFIG.radius*(r/CONFIG.rings);

    const id = letters[s]+r;

    const path = sectorPath(cx,cy,r0,r1,a0,a1);

    svg.append(
      el("path",{d:path,class:"cell",id})
    );

    cellGeometry[id] = {a0,a1,r0,r1};
  }
}

/* =======================
   Random dot placement
======================= */

function randomInCell(id) {
  const g = cellGeometry[id];

  const angle = g.a0 + Math.random()*(g.a1-g.a0);
  const radius = Math.sqrt(Math.random())*(g.r1-g.r0)+g.r0;

  return polar(cx,cy,radius,angle);
}

function addItem({id,label}) {
  if (!cellGeometry[id]) return;

  const p = randomInCell(id);

  svg.append(
    el("circle",{cx:p.x,cy:p.y,r:6,class:"dot"}),
    el("text",{x:p.x,y:p.y-10,class:"dot-label"},[label])
  );
}

ITEMS.forEach(addItem);

</script>
</body>
</html>
